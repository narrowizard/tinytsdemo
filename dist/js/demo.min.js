var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};System.register("vm/demo_extend",["tinyts/core/tinyts","tinyts/control/text"],function(exports_1,context_1){"use strict";var tinyts_1,text_1,BaseModel,_a;context_1&&context_1.id;return{setters:[function(tinyts_1_1){tinyts_1=tinyts_1_1},function(text_1_1){text_1=text_1_1}],execute:function(){BaseModel=function(_super){function BaseModel(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(BaseModel,_super),BaseModel.prototype.AfterInject=function(){this.mErrorWarning.SetValue("hhh")},BaseModel}(tinyts_1.AncView),__decorate([tinyts_1.v(text_1.TextView),__metadata("design:type","function"==typeof(_a=void 0!==text_1.TextView&&text_1.TextView)&&_a||Object)],BaseModel.prototype,"mErrorWarning",void 0),exports_1("BaseModel",BaseModel)}}}),System.register("vm/demo",["vm/demo_extend","tinyts/control/button","tinyts/core/tinyts","tinyts/control/input"],function(exports_2,context_2){"use strict";var demo_extend_1,button_1,tinyts_2,input_1,DemoModel,aa,_a,_b,_c;context_2&&context_2.id;return{setters:[function(demo_extend_1_1){demo_extend_1=demo_extend_1_1},function(button_1_1){button_1=button_1_1},function(tinyts_2_1){tinyts_2=tinyts_2_1},function(input_1_1){input_1=input_1_1}],execute:function(){DemoModel=function(_super){function DemoModel(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(DemoModel,_super),DemoModel.prototype.AfterInject=function(){var _this=this;_super.prototype.AfterInject.call(this),this.model.Account="account",this.model.Password="123456",this.btn.OnClick(function(){_this.model.Account="accountChange"})},DemoModel}(demo_extend_1.BaseModel),__decorate([tinyts_2.v(button_1.Button),__metadata("design:type","function"==typeof(_a=void 0!==button_1.Button&&button_1.Button)&&_a||Object)],DemoModel.prototype,"btn",void 0),__decorate([tinyts_2.v(input_1.InputView),__metadata("design:type","function"==typeof(_b=void 0!==input_1.InputView&&input_1.InputView)&&_b||Object)],DemoModel.prototype,"mAccount",void 0),__decorate([tinyts_2.v(input_1.InputView),__metadata("design:type","function"==typeof(_c=void 0!==input_1.InputView&&input_1.InputView)&&_c||Object)],DemoModel.prototype,"mPassword",void 0),aa=new DemoModel}}}),System.register("utils/link_age",[],function(exports_3,context_3){"use strict";var DataAgent,LinkAge;context_3&&context_3.id;return{setters:[],execute:function(){DataAgent=function(){function DataAgent(view,dataGetter){this.view=view,this.dataGetter=dataGetter,this.isPending=0}return DataAgent.prototype.IsValueSet=function(){return null!=this.delayValue},DataAgent.prototype.SetValue=function(value){if(!isNaN(+value))return this.delayValue=value,0==this.isPending&&this.view.SetValue(value),this},DataAgent.prototype.Value=function(){return this.view.Value()},DataAgent.prototype.GetData=function(param,next){var me=this;me.isPending++,me.dataGetter(param).then(function(data){if(me.view.SetData(data),me.isPending--,me.delayValue&&0==me.isPending)return me.view.SetValue(me.delayValue),void(me.delayValue=null);next&&next[0]&&next[0].GetData(me.view.Value(),next.slice(1))})},DataAgent.prototype.GetView=function(){return this.view},DataAgent}(),exports_3("DataAgent",DataAgent),LinkAge=function(){function LinkAge(){this.LinkedView=[]}return LinkAge.prototype.GetItem=function(index){return index<0||index>this.LinkedView.length-1?null:this.LinkedView[index]},LinkAge.prototype.ClearAll=function(index){if(!(index<0||index>this.LinkedView.length-1))for(var i=index;i<this.LinkedView.length;i++)this.LinkedView[i].GetView().SetData([])},LinkAge.prototype.PushItem=function(item){this.LinkedView.push(item)},LinkAge.prototype.Run=function(){var me=this;if(0!=this.LinkedView.length){this.LinkedView[0].GetData(null,this.LinkedView.slice(1));for(var i=0;i<me.LinkedView.length-1;i++)me.LinkedView[i].GetView().GetJQueryInstance().attr("linkage_bundle_id",i),me.LinkedView[i].GetView().On("change",function(obj){var t=+$(obj.target).attr("linkage_bundle_id"),p=me.LinkedView[t].Value();p&&me.LinkedView[t+1].GetData(p,me.LinkedView.slice(t+2))})}else console.error("LinkAge:items undefined!")},LinkAge}(),exports_3("LinkAge",LinkAge)}}}),System.register("control/list_editable",["tinyts/control/list"],function(exports_4,context_4){"use strict";var list_1,ListEditable;context_4&&context_4.id;return{setters:[function(list_1_1){list_1=list_1_1}],execute:function(){ListEditable=function(_super){function ListEditable(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ListEditable,_super),ListEditable.prototype.AppendItem=function(item){this.mData.push(item)},ListEditable.prototype.ReplaceItem=function(index,item){this.mData.splice(index,this.mData.length-index),this.mData.push(item)},ListEditable}(list_1.ListView),exports_4("ListEditable",ListEditable)}}}),System.register("control/list_value",["tinyts/control/list"],function(exports_5,context_5){"use strict";var list_2,ListValue;context_5&&context_5.id;return{setters:[function(list_2_1){list_2=list_2_1}],execute:function(){ListValue=function(_super){function ListValue(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ListValue,_super),ListValue.prototype.LoadView=function(parent){var _this=this,succ=_super.prototype.LoadView.call(this,parent);return succ&&this.SetEventHandler("li",function(obj){var id=$(obj.target).attr("data-id");_this.SetValue(id)}),succ},ListValue.prototype.Value=function(){return this.target.find(".active").attr("data-id")},ListValue.prototype.SetValue=function(value){this.target.find("li").removeClass("active"),this.target.find("li[data-id="+value+"]").addClass("active"),this.Trigger("change");var v=mx(this.mData).where(function(it){return it.Id==value}).singleOrDefault();this.onValueSet&&this.onValueSet(v)},ListValue.prototype.SetData=function(data){_super.prototype.SetData.call(this,data),this.SetValue(data[0].Id)},ListValue}(list_2.ListView),exports_5("ListValue",ListValue)}}}),System.register("services/linkage",[],function(exports_6,context_6){"use strict";var LinkageService;context_6&&context_6.id;return{setters:[],execute:function(){LinkageService=function(){function LinkageService(){}return LinkageService.prototype.GradeData=function(){return new Promise(function(resolve,reject){resolve([{Name:"初一",Id:1},{Name:"初二",Id:2},{Name:"初三",Id:3},{Name:"高一",Id:4},{Name:"高二",Id:5},{Name:"高三",Id:6}])})},LinkageService.prototype.SubjectData=function(param){return new Promise(function(resolve,reject){resolve([{Name:"数学",Id:1},{Name:"物理",Id:2},{Name:"化学",Id:3}])})},LinkageService}(),exports_6("LinkageService",LinkageService)}}}),System.register("vm/linkage",["tinyts/core/tinyts","utils/link_age","control/list_editable","control/list_value","services/linkage"],function(exports_7,context_7){"use strict";var tinyts_3,link_age_1,list_editable_1,list_value_1,linkage_1,PosData,CommonData,LinkAgeModel,aa;context_7&&context_7.id;return{setters:[function(tinyts_3_1){tinyts_3=tinyts_3_1},function(link_age_1_1){link_age_1=link_age_1_1},function(list_editable_1_1){list_editable_1=list_editable_1_1},function(list_value_1_1){list_value_1=list_value_1_1},function(linkage_1_1){linkage_1=linkage_1_1}],execute:function(){PosData=function(){return function(){}}(),CommonData=function(){return function(){}}(),LinkAgeModel=function(_super){function LinkAgeModel(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(LinkAgeModel,_super),LinkAgeModel.prototype.AfterInject=function(){var _this=this;this.mGradeInfo.onValueSet=function(value){_this.mCurPos.ReplaceItem(0,value)},this.mSubjectInfo.onValueSet=function(value){_this.mCurPos.ReplaceItem(1,value)},this.mCurPos.SetData([]),this.mCurPos.AppendItem({Name:"zhangsan"}),this.mCurPos.AppendItem({Name:"lisi"}),this.mCurPos.AppendItem({Name:"wangwu"}),this.mCurPos.ReplaceItem(3,{Name:"zhaoliu"}),this.linkAge=new link_age_1.LinkAge,this.linkAge.PushItem(new link_age_1.DataAgent(this.mGradeInfo,function(){return _this.service.GradeData()})),this.linkAge.PushItem(new link_age_1.DataAgent(this.mSubjectInfo,function(param){return _this.service.SubjectData(param)})),this.linkAge.Run()},LinkAgeModel}(tinyts_3.AncView),__decorate([tinyts_3.v(list_editable_1.ListEditable),__metadata("design:type",list_editable_1.ListEditable)],LinkAgeModel.prototype,"mCurPos",void 0),__decorate([tinyts_3.v(list_value_1.ListValue),__metadata("design:type",list_value_1.ListValue)],LinkAgeModel.prototype,"mGradeInfo",void 0),__decorate([tinyts_3.v(list_value_1.ListValue),__metadata("design:type",list_value_1.ListValue)],LinkAgeModel.prototype,"mSubjectInfo",void 0),__decorate([tinyts_3.s(linkage_1.LinkageService),__metadata("design:type",linkage_1.LinkageService)],LinkAgeModel.prototype,"service",void 0),aa=new LinkAgeModel}}}),System.register("vm/todo",["tinyts/core/tinyts","tinyts/control/list","tinyts/control/input"],function(exports_8,context_8){"use strict";var tinyts_4,list_3,input_2,KeyCode,TodoData,TodoDemo,aa,_a,_b;context_8&&context_8.id;return{setters:[function(tinyts_4_1){tinyts_4=tinyts_4_1},function(list_3_1){list_3=list_3_1},function(input_2_1){input_2=input_2_1}],execute:function(){!function(KeyCode){KeyCode[KeyCode.ENTER=13]="ENTER"}(KeyCode||(KeyCode={})),TodoData=function(){return function(Name){this.Name=Name}}(),TodoDemo=function(_super){function TodoDemo(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(TodoDemo,_super),TodoDemo.prototype.AfterInject=function(){var _this=this;this.newItem.On("keydown",function(ev){ev.keyCode==KeyCode.ENTER&&(_this.data.push(new TodoData(_this.newItem.Value())),_this.newItem.SetValue(""))}),this.list.SetEventHandler("li",function(obj){for(var text=$(obj.target).text(),i=0;i<_this.data.length;i++)_this.data[i].Name==text&&_this.data.splice(i,1)}),this.data=[new TodoData("First"),new TodoData("Second")]},TodoDemo}(tinyts_4.AncView),__decorate([tinyts_4.v(list_3.ListView),__metadata("design:type","function"==typeof(_a=void 0!==list_3.ListView&&list_3.ListView)&&_a||Object)],TodoDemo.prototype,"list",void 0),__decorate([tinyts_4.v(input_2.InputView),__metadata("design:type","function"==typeof(_b=void 0!==input_2.InputView&&input_2.InputView)&&_b||Object)],TodoDemo.prototype,"newItem",void 0),aa=new TodoDemo}}});